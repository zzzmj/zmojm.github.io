(this["webpackJsonpzz-tag"]=this["webpackJsonpzz-tag"]||[]).push([[17],{118:function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return d}));var c=n(75),i=function(e){var t=new c.a.Query("Question");return t.limit(1e3),e&&t.containedIn("id",e),t.find()},r=function(e){var t=new c.a.Query("Question");return"object"===typeof e?t.containedIn("id",e):t.equalTo("id",e),t.limit(1e3),t.find()},s=function(e){var t=[];return e.forEach((function(e){var n=new(c.a.Object.extend("Question"));Object.keys(e).forEach((function(t){n.set(t,e[t])})),t.push(n)})),c.a.Object.saveAll(t)},a=function(e,t){return c.a.Object.createWithoutData("QuestionBook",e).save({notes:t})},o=function(e){var t=c.a.Object.createWithoutData("Category","62031ff0a10bf856ff93cf99");return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t.save()},u=function(e){return new c.a.Query("Category").get(e||"62031ff0a10bf856ff93cf99")},l=function(e){var t=c.a.Object.createWithoutData("Category","6253f0461122b910ec5dfd1e");return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t.save()},d=function(){return new c.a.Query("Category").get("6253f0461122b910ec5dfd1e")}},248:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var c=n(75),i=function(e){var t=new c.a.Query("FbQuestion");return t.limit(1e3),e&&t.containedIn("id",e),t.find()},r=function(e,t){var n=new c.a.Query("QuestionBook");return n.limit(1e3),t&&n.skip(t),e&&n.containedIn("id",e),n.find()},s=function(e){var t=[];return e.forEach((function(e){var n=new(c.a.Object.extend("FbQuestion"));Object.keys(e).forEach((function(t){n.set(t,e[t])})),t.push(n)})),c.a.Object.saveAll(t)}},261:function(e,t,n){},279:function(e,t,n){"use strict";var c=n(0),i=n(82),r=n(270),s=n(330),a=(n(280),n(3));t.a=function(e){var t=e.data,n=t.correctAnswer,o=t.solution,u=t.keypoints,l=t.questionMeta,d=t.source,f=t.id,j=t.notes,b=["A","B","C","D"];Object(c.useEffect)((function(){}),[]);return console.log("keypoints",u,e.data),Object(a.jsxs)("div",{className:"answer",children:[Object(a.jsxs)("div",{className:"correct",children:[Object(a.jsxs)("p",{children:["\u6b63\u786e\u7b54\u6848\u662f\uff1a",Object(a.jsx)("span",{children:b[n.choice]})]}),Object(a.jsx)(i.a,{onClick:function(){e.onClose()},children:"\u6536\u8d77"})]}),Object(a.jsx)(r.a,{}),Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:[Object(a.jsx)("span",{children:"\u89e3\u6790\uff1a"}),Object(a.jsx)("div",{className:"content",dangerouslySetInnerHTML:{__html:o}})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("span",{children:"\u8003\u70b9\uff1a"}),Object(a.jsx)("div",{className:"content",children:u&&u.map((function(e,t){return Object(a.jsx)(s.a,{color:"#108ee9",children:e.name},t)}))})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("span",{children:"\u6765\u6e90\uff1a"}),Object(a.jsx)("div",{className:"content",children:d})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("span",{children:"\u7edf\u8ba1\uff1a"}),Object(a.jsxs)("div",{className:"content",children:[Object(a.jsxs)(s.a,{color:"green",children:["\u6b63\u786e\u7387\uff1a",l.correctRatio.toFixed(2),"%"]}),Object(a.jsxs)(s.a,{color:"magenta",children:["\u6613\u9519\u9879\uff1a",b[l.mostWrongAnswer.choice]]})]})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("span",{children:"\u9898\u53f7\uff1a"}),Object(a.jsx)("div",{className:"content",children:f})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("span",{children:"\u7b14\u8bb0\uff1a"}),Object(a.jsx)("div",{onClick:function(){e.onChange&&e.onChange(e.data)},className:"question-notes",children:Object(a.jsx)("div",{className:"html",dangerouslySetInnerHTML:{__html:j}})})]})]})]})}},280:function(e,t,n){},283:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var c=n(75),i=function(e){var t=new c.a.Query("Collection");return t.limit(1e3),e&&t.containedIn("id",e),t.find()},r=function(e){var t=[];return e.forEach((function(e){var n=new(c.a.Object.extend("Collection"));Object.keys(e).forEach((function(t){n.set(t,e[t])})),t.push(n)})),c.a.Object.saveAll(t)},s=function(e){return c.a.Object.createWithoutData("Collection",e).destroy()}},321:function(e,t,n){},343:function(e,t,n){"use strict";n.r(t);var c=n(15),i=n(18),r=n(144),s=n.n(r),a=n(154),o=n(145),u=n(66),l=n(0),d=n(140),f=n(298),j=n(272),b=n(43),h=n.n(b),O=n(118),p=(n(261),n(2)),v=n(279),x=n(248),m=(n(321),n(3)),g=function(e){var t=e.checked?"https://nodestatic.fbstatic.cn/weblts_spa_online/tiku/static/collected-btn.d4120fd14a7eda0e8e50.png":"https://nodestatic.fbstatic.cn/weblts_spa_online/tiku/static/collect-btn.e0cca1095b2514b3e6c5.png";return Object(m.jsx)("span",{onClick:function(){e.onClick&&e.onClick()},className:"collect-icon",children:Object(m.jsx)("img",{src:t,alt:""})})},w=n(287),y=n(283);t.default=function(){var e=Object(l.useRef)(null),t=Object(p.h)(),n=Object(l.useState)({}),r=Object(u.a)(n,2),b=r[0],k=r[1],C=Object(l.useState)(!0),N=Object(u.a)(C,2),I=N[0],S=N[1],z=Object(l.useState)(!1),E=Object(u.a)(z,2),Q=E[0],A=E[1],_=Object(l.useState)([]),J=Object(u.a)(_,2),D=J[0],M=J[1],H=Object(l.useState)({}),q=Object(u.a)(H,2),L=q[0],W=q[1],B=Object(l.useState)([]),T=Object(u.a)(B,2),K=T[0],R=T[1];Object(l.useEffect)((function(){Object(O.e)().then((function(e){var t=e.toJSON().content;M(t)})),F()}),[]),Object(l.useEffect)((function(){var e=t.objectId;if(e.includes(","))V();else if(D.length>0){var n="";!function e(t,n,c){for(var i=0;i<t.length;i++){var r=t[i];if(r.id==n)return void c(r.questionIds);r.children&&e(r.children,n,c)}}(D,e,(function(e){n=e})),n?Object(O.g)(n).then((function(e){var t=e.map((function(e){return e.toJSON()}));R(t)})):d.b.error("\u9898\u76ee\u4e0d\u5b58\u5728")}}),[]);var V=function(){var e=function(){var e=Object(o.a)(s.a.mark((function e(t){var n,c,i,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.c)(t);case 2:return n=e.sent,e.next=5,Object(O.g)(t);case 5:return c=e.sent,e.next=8,Object(x.b)(t);case 8:return i=e.sent,r=[].concat(Object(a.a)(n.map((function(e){return e.toJSON()}))),Object(a.a)(c.map((function(e){return e.toJSON()}))),Object(a.a)(i.map((function(e){return e.toJSON()})))),o=[],t.forEach((function(e){var t=r.find((function(t){return t.id===e}));t&&o.push(t)})),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=t.objectId.split(",").filter((function(e){return""!=e})).map((function(e){return parseInt(e)}));S(!0),e(n).then((function(e){R(e),S(!1)})).catch((function(e){S(!1)}))},F=function(){Object(y.c)().then((function(e){var t=e.map((function(e){return e.toJSON()})),n={};t.forEach((function(e){n[e.id]=e.objectId})),W(n)}))},G=function(t){var n=t.notes,c=t.objectId;t.id;k({id:c,notes:n}),console.log("data",t),A(!0),e.current.setContent(n||"")};return window.getAnswer=function(e,t){var n=K.map((function(e){return parseInt(e.correctAnswer.choice)+1})),c=0,i=0,r=[],s=[],a=t.split("").filter((function(e){return" "!=e}));(a.includes("A")||a.includes("B")||a.includes("C")||a.includes("D"))&&(a=a.map((function(e){return e.charCodeAt()-64})),console.log("arr",a));for(var o=e;o<a.length+e;o++){var u=n[o],l=a[c];c++,u==l?i++:(r.push(o+1),s.push(K[o].id))}console.log("\u6b63\u786e\u7387\uff1a",parseInt(100*i/a.length)),console.log("\u9519\u9898\uff1a",r.join(", ")),console.log("\u9898\u53f7\uff1a",s.join(", "))},Object(m.jsxs)("div",{className:"wrap",children:[Object(m.jsx)("h2",{children:"\u9519\u9898\u6574\u7406"}),Object(m.jsx)("div",{className:"wrap-print",children:I?Object(m.jsx)(f.a,{}):Object(m.jsx)("div",{className:"list",children:K.map((function(e,t){var n="four",r=[];e.accessories[0].options.forEach((function(e){r.push(e.length)}));var s=Math.max.apply(Math,r);s>=20?n="one":s>10&&(n="two");var a=h()(Object(c.a)({question:!0},e.status,e.status));return Object(m.jsxs)("div",{className:"item",children:[Object(m.jsxs)("div",{className:a,children:[Object(m.jsxs)("span",{children:[t+1,"."]}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("div",{className:"title",children:[Object(m.jsx)("span",{dangerouslySetInnerHTML:{__html:e.content}}),e.answerVisible&&Object(m.jsx)(g,{checked:L[e.id],onClick:function(){return function(e,t){if(t){var n=L[e.id];console.log("objectId",n),Object(y.b)(n).then((function(){d.b.success("\u53d6\u6d88\u6536\u85cf"),F()})).catch((function(e){d.b.error("\u53d6\u6d88\u5931\u8d25")}))}else Object(y.a)([{id:e.id}]).then((function(){d.b.success("\u6536\u85cf\u6210\u529f"),F()})).catch((function(e){d.b.error("\u6536\u85cf\u5931\u8d25")}))}(e,L[e.id])}})]}),Object(m.jsx)("div",{className:"options ".concat(n),children:e.accessories[0]&&e.accessories[0].options.map((function(t,n){var r=n==e.selectIndex&&"correct"==e.status?"correct":"wrong",s=h()(Object(c.a)({option:!0},r,n===e.selectIndex));return Object(m.jsxs)("div",{onClick:function(){return function(e,t){var n=e.correctAnswer.choice,c=e.id,r="";r=n==t?"correct":"wrong";var s=K.map((function(e){return e.id===c?Object(i.a)(Object(i.a)({},e),{},{answerVisible:!0,status:r,selectIndex:t}):e}));R(s)}(e,n)},className:s,children:[Object(m.jsxs)("span",{className:"num",children:[["A","B","C","D"][n],"."]}),Object(m.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})]},n)}))})]})]}),e.answerVisible&&Object(m.jsx)(v.a,{onChange:G,onClose:function(){return function(e){var t=e.id,n=K.map((function(e){return e.id===t?Object(i.a)(Object(i.a)({},e),{},{answerVisible:!1,status:"",selectIndex:""}):e}));R(n)}(e)},data:e})]},e.id)}))})}),Object(m.jsx)(j.a,{forceRender:!0,width:1e3,title:"\u7f16\u8f91\u7b14\u8bb0",visible:Q,onOk:function(){var t=e.current.getContent();console.log("activeNotes.objectId",b.id),Object(O.h)(b.id,t).then((function(e){d.b.success("\u66f4\u65b0\u6210\u529f"),V(),A(!1)})).catch((function(e){d.b.success("\u66f4\u65b0\u5931\u8d25")}))},onCancel:function(){A(!1)},children:Object(m.jsx)(w.a,{className:"notes-editor",onInit:function(t,n){S(!1),e.current=n},apiKey:"24p0l3ih7zoyefn7sj47oxgrjz14zp69vuiyxo9tzk25oapj",init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","preview","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})})]})}},75:function(e,t,n){"use strict";n(146),n(147);var c=n(163),i=n.n(c);i.a.init({appId:"zhG78X78KsJ4MuyLquDrtexj-gzGzoHsz",appKey:"QhcOlKH32P32CCaEUbzJJWbo",serverURL:"https://zhg78x78.lc-cn-n1-shared.com"});t.a=i.a}}]);
//# sourceMappingURL=17.ed1c75d3.chunk.js.map